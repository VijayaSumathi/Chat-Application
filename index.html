<html>
    <head>
        <style>
            #chat{
                height:500px;
            }#contentWrap{
                display:none;
            }#chatWrap{
                float:left;
                border: 1px #000 solid;
            }#users{
                float:right;
                width: 300px;
                position: fixed;
                height: 100%;
                right: 0px;
                top: 0px;
                text-align: center;
                padding-top: 10px;
                padding-bottom: 10px;
                border: 1px solid rgba(29, 49, 91, .3);

            }

        </style>
    </head>
    <body>
        <div id="nickWrap">
            <p> enter username</p>
            <p id="nickError"></p>
            <form id="setNick">
             <input size="35" id="nickname"></input>
             <input type="submit"></input>
            </form>
        </div>
        <div id="contentWrap">
        <div id="chatWrap">
        <div id="chat"></div>
        <form id="send-message">
            <input size="35" id="message">
            <input type="submit" value="send">
        </form>
        </div>
        <div id="users"></div>
        </div>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
        jQuery(function($){
            var socket = io.connect(); 
            var $nickForm=$('#setNick');
            var $nickError=$('#nickError');
            var $nickBox=$('#nickname');
            var $users=$('#users');
             var $messageForm=$('#send-message');
               var $messageBox=$('#message');
                var $chat=$('#chat');
                $nickForm.submit(function(e){
              e.preventDefault();
              socket.emit('new user',$nickBox.val(),function(data){
              if(data){
                $('#nickWrap').hide();
                $('#contentWrap').show();
              }else{
                $nickError.html("that username is already taken please try again")
              }
              });
              nickBox.val('');
            });
            socket.on('usernames',function(data){
              var html = '';
             for(i=0;i<data.length ;i++){
           html+=data[i]+'<br/>';
            }
            $users.html(html); 
            });
                $messageForm.submit(function(e){
              e.preventDefault();
               console.log("Sub,jkdksdjs")
              socket.emit('send message',$messageBox.val());
              $messageBox.val('');
         });
         socket.on('new message',function(data){
         $chat.append(+data.msg+"<br/>")
         });
        });
        </script>
    </body>
</html>